#include "HSPCL64.as"

	HCLinit
	HCLSetDev 1
	prg=HCLCreateProgram("membandwidth.cl")
	krn=HCLCreateKernel(prg,"membdwdth")
	clmemm=HCLCreateBuffer(250000000*4)
	
	//HCLWriteBuffer clmemm,inta,200000000*4,0,0
	HCLSetKernel krn,0,clmemm

	
	HCLDoKrn1 krn,128,16
	HCLFinish
	
	stm=gettime(7)+gettime(6)*1000
	HCLDoKrn1 krn,128,16
	HCLFinish
	mes gettime(7)+gettime(6)*1000-stm
	dim inta,4
	HCLReadBuffer clmemm,inta,16,0,0
	mes "1+1="+inta.0
	mes "2+2="+inta.1
	mes "3+3="+inta.2
	mes "4+4="+inta.3
	