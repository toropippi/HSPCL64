#include "HSPCL64.as"

	HCLinit
	sz=1024*1024*512//512Mb、この大きさなら転送に少し時間がかかるはず
	mem=HCLCreateBuffer(sz)
	dim i,sz/4
	i.134000000=2345,25643256,437,3265,6456,56//適当な値
	
	HCLWriteBuffer mem,i,sz//gpuに転送ここではブロッキングモードon
	dim i,sz/4//また0に初期化
	HCLFinish

	mes "a"
	HCLReadBuffer mem,i,sz,0,0,0,0//第6引数に0を指定することでブロッキングモードオフで実行
	mes "a"

	mes i.134000000//ここで0が表示されればまだ転送が終わっていない
	mes i.134000001
	mes i.134000002
	mes i.134000003
	mes i.134000004
	mes i.134000005
	mes "ここで0が表示されればまだデータ転送が終わっていない(ブロッキングモードoff成功)"

	HCLFinish//ここで転送終わるまで待つことになる

	pos 0,160
	mes i.134000000//ここで転送終わっている
	mes i.134000001
	mes i.134000002
	mes i.134000003
	mes i.134000004
	mes i.134000006
	mes "ここで0以外が表示されればデータ転送終わっている(HCLFinish成功)"
	stop